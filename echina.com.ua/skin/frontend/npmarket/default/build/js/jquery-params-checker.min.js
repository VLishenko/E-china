!function($){function a(a,b){this.$el=$(a),this.productId=this.$el.data("configurable-id"),this.defaults={paramsBlock:".js-param-block",paramLink:".js-param-link",disableBuyBtn:!1,addToCartBtn:".js-add-to-cart-button"},this.settings=$.extend(this.defaults,b),this.selected,this.init()}a.prototype.init=function(){this.data=this.$el.find(".js-data-configurable").data("json"),this.settings.disableBuyBtn&&this.switchAddToCartButton(),this.initEvents()},a.prototype.initEvents=function(){$(this.settings.paramsBlock,this.$el).on("click",this.settings.paramLink,this.selectParam.bind(this))},a.prototype.selectParam=function(a){var b=this;if(!$(a.target).hasClass("not-active")){$(a.currentTarget).closest(this.settings.paramsBlock).addClass("-selected"),b.settings.disableBuyBtn&&this.switchAddToCartButton(),this.instanceBlockId=$(a.target).closest(".js-configurable").data("configurable-id"),this.$instances=$(".js-configurable").filter(function(){return $(this).data("configurable-id")==b.instanceBlockId});var c=a.target.className;if(!$(a.target).closest(".js-param-item").hasClass("not-active")){if(c.indexOf("js-param-link")>-1){var d=$(a.currentTarget).closest(this.settings.paramsBlock).data("configurable-type"),e=$(a.target).closest(".js-param-item").find(".js-param-input").val(),f=$(a.target).closest(".js-param-item").data("value");this.$instances.each(function(){var a=$("[data-configurable-type="+d+"]",this),b=a.find(".js-param-input").filter("[value="+e+"]");a.find(".js-param-input").attr("checked",!1),a.find(".js-param-item").removeClass("selected"),a.find(".js-param-choosen").text(f),b.prop("checked",!0),b.closest(".js-param-item").addClass("selected")}),this.selected=this.data[d][e],this.updateDependencieses()}return!1}}},a.prototype.updateDependencieses=function(){for(var a in this.selected){var b=this.selected[a];this.$instances.each(function(){$inputs=$("[data-configurable-type="+a+"]",this).find(".js-param-input"),$inputs.each(function(){var a=$(this),c=$(this).closest(".js-param-item");c.addClass("not-active"),c.find(".js-param-link").addClass("not-active");for(var d=0;d<b.length;d++)a.val()==b[d]&&(c.removeClass("not-active"),c.find(".js-param-link").removeClass("not-active"))})})}},a.prototype.isConfigurableValid=function(){var a=!0;return this.$el.find(".js-param-block").length&&this.$el.find(".js-param-block").each(function(){$(this).hasClass("-selected")||(a=!1)}),a},a.prototype.switchAddToCartButton=function(){var a=this;$addToCartBtn=$(this.settings.addToCartBtn).filter(function(){return $(this).data("product-id")==a.productId}),this.isConfigurableValid()?$addToCartBtn.removeClass("disabled"):$addToCartBtn.addClass("disabled")},$.fn.paramsChecker=function(b){return this.each(function(){$(this).paramsChecker=new a(this,b)})}}(jQuery);