!function($){"use strict";var a=function(a,b){this.hParam=$.extend({},$.fn.limitation.defaults,b),this.jContainer=$(a),this.jItems=this.jContainer.find(this.hParam.items),this.jItemsCount=this.jContainer.find(this.hParam.itemsCount),this.jButton=this.jContainer.find(this.hParam.button),this.jContent=this.jContainer.find(this.hParam.content),this._prefixEvent=".limitation",this.event=this.hParam.event+this._prefixEvent,this.length=0,this.hiddenItems=null,this.containerHeight=null,this.itemsHeight=null,this.jContainer.length&&this.init()};a.prototype={constructor:a,init:function(){this.length=this.jItems.length,this.containerHeight=this.jContent.outerHeight(),this.hiddenItems=this.getHiddenItems(),this.jButton.addClass(this.hParam.hiddenClass),this.hiddenItems.addClass(this.hParam.hiddenClass),this.itemsHeight=this.getItemsHeight(),this.jContent.css("height",this.itemsHeight),this.openText=this.jButton.data("open-text"),this.closeText=this.jButton.data("close-text"),this.openText&&this.jButton.text(this.openText),this.initEvents()},initEvents:function(){var a=this,b=0;this.length>this.hParam.maxElem&&this.jButton.removeClass(this.hParam.hiddenClass),$(window).on("resize"+this._prefixEvent,function(){a.itemsHeight=a.getItemsHeight()}),this.jButton.on(this.event,function(c){var d=$(this);d.attr("href")&&c.preventDefault(),b++,b%2===0?(a.jContent.animate({height:a.itemsHeight},a.hParam.animateSpeed,function(){d.removeClass(a.hParam.activeClass),a.hiddenItems.addClass(a.hParam.hiddenClass)}),a.openText&&a.jButton.text(a.openText)):(a.hiddenItems.removeClass(a.hParam.hiddenClass),a.jContent.animate({height:a.containerHeight},a.hParam.animateSpeed,function(){d.addClass(a.hParam.activeClass)}),a.closeText&&a.jButton.text(a.closeText))})},getHiddenItems:function(){var a=this.jItems.slice(this.hParam.maxElem);return this.jItemsCount.text(a.length),a},getItemsHeight:function(){var a=0;return this.jItems.each(function(){return a+=$(this).outerHeight()}),a},destroy:function(){$(window).off(this._prefixEvent),this.jButton.off(this._prefixEvent),this.jContent.css("height","auto"),this.hiddenItems.removeClass(this.hParam.hiddenClass),this.jButton.removeClass(this.hParam.hiddenClass),this.jContainer.data("Limitation",null),$.fn.limitation.constructor=null}},$.fn.limitation=function(b){var c=$(this),d=c.data("Limitation"),e="object"==typeof b&&b;return this.each(function(){return $.data(this,"limitation")||$.data(this,"limitation",d=new a(this,e)),"string"==typeof b&&d[b](),this})},$.fn.limitation.defaults={items:".js-item-limitation",itemsCount:".js-item-limitation-count",content:".js-limitation-content",button:".js-button-limitation",event:"click",maxElem:2,animateSpeed:700,hiddenClass:"hidden",activeClass:"active",beforeChange:function(a,b){},afterChange:function(a,b){}},$.fn.limitation.constructor=a}(jQuery);