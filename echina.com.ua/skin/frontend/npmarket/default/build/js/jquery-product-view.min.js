!function($){"use strict";$(document).ready(function(){function a(){var a=q.slice(0,s);p.empty(),p.append(a)}function b(){p.empty(),p.append(q)}function c(){return r.text(t),r.removeClass("properties-table__more--opened"),r.off("click",c),r.on("click",d),a(),!1}function d(){return r.text(u),r.addClass("properties-table__more--opened"),r.off("click",d),r.on("click",c),b(),!1}var e=($(".js-lazyload__img"),$(".js-product-carousel")),f=$(".js-product-gallery-thumbs"),g=$(".js-add-review-form"),h=$(".js-rating-bar"),i=$(".js-bundle-carousel");if(g.validate({errorElement:"span",errorClass:"invalid",focusin:!1,onclick:!1,onfocusout:function(a){$(a).valid()},rules:{rating:{ratingValidator:!0}}}),g.on("submit",function(){if(!h.hasClass("active")){var a=$("<span />");return a.addClass("invalid review-rating__invalid"),a.text("Поставьте оценку"),h.parent().append(a),h.on("click",function(){h.parent().find(".invalid").remove()}),!1}}),i&&(i.on("init",function(a,b){if(b.$dots){var c=b.$dots.children().length,d=b.$dots.children().filter(".slick-active").index()+1;b.$slider.append('<p class="bundle-carousel-text">'+d+" / "+c+"</p>")}}),i.slick({slide:".bundle",dots:!0,dotsClass:"hidden",infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,lazyLoad:"progressive",prevArrow:'<button class="bundle-carousel-nav-trigger bundle-carousel-nav-trigger--prev" type="button" aria-label="previous" data-role="none"></button>',nextArrow:'<button class="bundle-carousel-nav-trigger bundle-carousel-nav-trigger--next" type="button" aria-label="next" data-role="none"></button>'}),i.on("reInit afterChange",function(a,b){if(b.$dots){var c=b.$dots.children().length,d=b.$dots.children().filter(".slick-active").index()+1;b.$slider.find(".bundle-carousel-text").text(d+" / "+c)}b.$slides.find(".js-lazyload__img").lazyload()})),e){var j=4,k=4;e.data("slide-product-qty")&&(j=j=e.data("slide-product-qty")),e.on("init",function(a,b){if(b.$dots){var c=b.$dots.children().length,d=b.$dots.children().filter(".slick-active").index()+1;b.$slider.append('<p class="carousel-text product-similar__carousel-text">'+d+" / "+c+"</p>")}}),e.slick({dots:!0,dotsClass:"hidden",infinite:!0,speed:500,slidesToShow:j,slidesToScroll:k,lazyLoad:"progressive",prevArrow:'<button class="carousel-nav-trigger carousel-nav-trigger--prev product-similar__carousel-nav-trigger" type="button" aria-label="previous" data-role="none"></button>',nextArrow:'<button class="carousel-nav-trigger carousel-nav-trigger--next product-similar__carousel-nav-trigger" type="button" aria-label="next" data-role="none"></button>'}),e.on("reInit afterChange",function(a,b){if(b.$dots){var c=b.$dots.children().length,d=b.$dots.children().filter(".slick-active").index()+1;b.$slider.find(".carousel-text").text(d+" / "+c)}b.$slides.find(".js-lazyload__img").lazyload()})}if(f.length){var l=$(".js-gallery-image"),m=$(".js-product-gallery-thumbs"),n=".js-product-gallery-thumb",o=$(".js-gallery-trigger");f.slick({slidesToShow:8,slidesToScroll:8,dots:!1,vertical:!0,verticalSwiping:!0,infinite:!1,prevArrow:'<div class="gallery__btn gallery__btn-prev"></div>',nextArrow:'<div class="gallery__btn gallery__btn-next"></div>'}),m.magnificPopup({mainClass:"popup-light",type:"image",delegate:n,gallery:{arrowMarkup:'<button title="%title%" type="button" class="popup-light__arrow mfp-arrow-%dir%"></button>',preload:[0,1],navigateByImgClick:!0,enabled:!0,tCounter:'<span class="mfp-counter">%curr% / %total%</span>'}}),o.on("click",function(){var a=$(this);m.find(n).eq(+a.attr("data-thumb-index")).trigger("click")}),l.elevateZoom({gallery:".js-product-gallery-thumbs",galleryItems:".js-product-gallery-thumb",galleryActiveClass:"current",galleryEvent:"mouseenter",zoomWindowFadeIn:500,zoomLensFadeIn:500,zoomWindowFadeOut:10,zoomWindowWidth:350,zoomWindowHeight:450,borderColour:"#fff",imageCrossfade:!0,scrollZoom:!0,cursor:"pointer",lensOpacity:.4,lenszoom:!1,onAfterChange:function(a,b){o.attr("data-thumb-index",a.index())}})}if(h.length&&h.progressBar(),$(".js-timeago").length>0&&$(".js-timeago").timeago(),$(".js-tabs").length&&$(".js-tabs").customTabs(),$(".js-sizes-popup").length>0&&$(".js-sizes-popup").magnificPopup({type:"inline",midClick:!0}),$(".js-more-characters").length){var p=$(".properties-table tbody"),q=$(".properties-table tr"),r=$(".js-more-characters"),s=6,t=$(".js-more-characters").data("state-show-text"),u=$(".js-more-characters").data("state-hide-text");q.length>s&&(r.on("click",d),r.text(t),a())}$(document).on("ready",function(){$(window).trigger("documentHeightChange")}),function(){function a(){setTimeout(function(){c=e.height()+$(".js-page-footer").outerHeight(!0)+50,$(".js-benefits-list").length&&(c+=$(".benefits-list").outerHeight(!0)),d=$(document).height()-c,b()},0)}function b(){var a=$(document).scrollTop(),b="fixed";a>d?e.css({top:-(a-d)+"px"}):e.css({top:0}),a>=f&&$(window).width()>1100?(e.addClass(b),e.fadeIn(100)):e.fadeOut(100)}if($(".js-product-sidebar").length){var c,d,e=$(".js-product-sidebar"),f=$(".js-main-add-to-cart-button").offset().top;$(document).on("ready",a),$(window).on("resize documentHeightChange",a).on("scroll",b)}}(),function(){if($(".js-info-tabs").length){var a=$(".js-info-tabs").customTabs({trigger:".js-info-tabs__trigger",tab:".js-info-tabs__content",openedId:"0"});$(".js-open-tab").length&&$(".js-open-tab").on("click",function(){var b=$(this).data("open-tab-num");b&&a.customTabs("changeOpenTab",b)})}}(),$(".bundle").length&&$(".bundle").BundleProducts(),function(){function a(){var a=$(this),d=$(this).hasClass("js-btn-favorite_added"),e=$(this).data("in-favorite-text"),f=$(this).data("add-favorite-text"),g=$(this).data("add-link"),h=$(this).data("del-link"),i=$(this).data("product-id"),j=c.filter("[data-product-id = "+i+"]");return b=$(".js-favorite-btn__qty"),d?$.get(h+"?isAjax=1").done(function(c){var d;try{var d=JSON.parse(c);if(1!=d.success)return void alert("Возникла ошибка! Попробуйте позже.")}catch(b){window.location.replace(a.data("redirect-link"))}b&&b.text(parseInt(b.text())-1),j.each(function(){$(this).removeClass("js-btn-favorite_added"),$(this).find(".js-state-text")&&$(this).find(".js-state-text").text(f);var b=$(this).data("message-remove-from-favorites"),c=new NotifyService(b,"success",a);c.showMessage(),$(this).hasClass("js-favorite-icon")?$(this).removeClass("active"):$(this).find(".js-favorite-icon").removeClass("active")})}):$.get(g+"?isAjax=1").done(function(c){var d;try{var d=JSON.parse(c);if(1!=d.success)return void alert("Возникла ошибка! Попробуйте позже.")}catch(b){window.location.replace(a.data("redirect-link"))}b&&b.text(parseInt(b.text())+1),j.each(function(){$(this).addClass("js-btn-favorite_added"),$(this).find(".js-state-text")&&$(this).find(".js-state-text").text(e),$(this).hasClass("js-favorite-icon")?$(this).addClass("active"):$(this).find(".js-favorite-icon").addClass("active")})}),!1}var b,c=$(".js-btn-favorite");c.length&&c.on("click",a)}(),$(document).on("ready",function(){$(window).trigger("initReviews")});(function(){function a(){c.each(function(){var a=$(this).parent().find(".review-list__link-more"),d=c.height();if($(this).height()>215){var d=$(this).height();$(this).addClass("review-list__content-box--overflow"),$(this).animate({height:"215px"},300),a.on("click",b.bind(a,d)),a.text(a.data("state-show-text")),a.show()}})}function b(a){var b=$(this),c=b.parent().find(".js-review-txt");return b.hasClass("review-list__link-more--opened")?(c.addClass("review-list__content-box--overflow"),c.animate({height:"215px"},300,"swing",function(){$(window).trigger("documentHeightChange")}),b.removeClass("review-list__link-more--opened"),b.text(b.data("state-show-text"))):(c.removeClass("review-list__content-box--overflow"),c.animate({height:a+"px"},300,"swing",function(){$(window).trigger("documentHeightChange")}),b.addClass("review-list__link-more--opened"),b.text(b.data("state-hide-text"))),!1}var c=$(".js-review-txt");$(window).on("initReviews",function(){setTimeout(a,0)})})();if($(".js-configurable").length){var v=$(".js-configurable");v.paramsChecker({disableBuyBtn:!0})}})}(jQuery);